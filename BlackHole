local UserInputService = game:GetService("UserInputService")
local Mouse = game:GetService("Players").LocalPlayer:GetMouse()
local Folder = Instance.new("Folder", game:GetService("Workspace"))
local Part = Instance.new("Part", Folder)
local Attachment1 = Instance.new("Attachment", Part)

Part.Anchored = true
Part.CanCollide = false
Part.Transparency = 1

local Updated = Mouse.Hit + Vector3.new(0, 5, 0)

local NetworkAccess = coroutine.create(function()
    settings().Physics.AllowSleep = false
    while game:GetService("RunService").RenderStepped:Wait() do
        for _, Player in ipairs(game:GetService("Players"):GetPlayers()) do
            if Player ~= game:GetService("Players").LocalPlayer then
                Player.MaximumSimulationRadius = 0
                pcall(function()
                    sethiddenproperty(Player, "SimulationRadius", 0)
                end)
            end
        end
        pcall(function()
            game:GetService("Players").LocalPlayer.MaximumSimulationRadius = math.huge
            setsimulationradius(math.huge)
        end)
    end
end)

coroutine.resume(NetworkAccess)

local function ForcePart(v)
    if v:IsA("Part") and not v.Anchored and not v.Parent:FindFirstChild("Humanoid") and not v.Parent:FindFirstChild("Head") and v.Name ~= "Handle" then
        Mouse.TargetFilter = v
        for _, child in ipairs(v:GetChildren()) do
            if child:IsA("BasePart") then
                child:Destroy()
            end
        end
        if v:FindFirstChild("Attachment") then
            v:FindFirstChild("Attachment"):Destroy()
        end
        if v:FindFirstChild("AlignPosition") then
            v:FindFirstChild("AlignPosition"):Destroy()
        end

        v.CanCollide = false

        local Torque = Instance.new("Torque", v)
        Torque.Torque = Vector3.new(100000, 100000, 100000)
        
        local AlignPosition = Instance.new("AlignPosition", v)
        local Attachment2 = Instance.new("Attachment", v)
        Torque.Attachment0 = Attachment2
        
        AlignPosition.MaxForce = math.huge
        AlignPosition.MaxVelocity = math.huge
        AlignPosition.Responsiveness = 200
        AlignPosition.Attachment0 = Attachment2
        AlignPosition.Attachment1 = Attachment1
    end
end

local function HandlePartAdded(v)
    if not v:IsA("BasePart") then
        return
    end

    ForcePart(v)
end

for _, v in ipairs(game:GetService("Workspace"):GetDescendants()) do
    HandlePartAdded(v)
end

game:GetService("Workspace").DescendantAdded:Connect(HandlePartAdded)

UserInputService.InputBegan:Connect(function(Key, Chat)
    if Key.KeyCode == Enum.KeyCode.E and not Chat then
        Updated = Mouse.Hit + Vector3.new(0, 5, 0)
    end
end)

spawn(function()
    while game:GetService("RunService").RenderStepped:Wait() do
        pcall(function()
            Attachment1.WorldCFrame = Updated
        end)
    end
end)
